<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="Gy0v5fPBzo8V6kQn7oOcPhNXVas7zpn5e7eVTANnKBM">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather:300,300italic,400,400italic,700,700italic|Oswald:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  
  <link rel="stylesheet" href="/lib/animate-css/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"decodificar.org","root":"/","scheme":"Mist","version":"8.0.0-rc.4","exturl":false,"sidebar":{"position":"left","display":"remove","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeIn","post_body":"none","coll_header":"fadeIn","sidebar":"fadeInUp"}},"path":"search.xml"};
  </script>

  <meta name="description" content="¿Cuántos datos hay que mirar para entender la evolución de la pandemia en un país? La respuesta simple es &quot;muchos&quot;. Sin embargo, al combinar dos datos (casos totales y casos nuevos diarios) podemos te">
<meta property="og:type" content="article">
<meta property="og:title" content="¿Cómo entender la evolución de la pandemia en el mundo?">
<meta property="og:url" content="https://decodificar.org/covid/pandemia_mundial/index.html">
<meta property="og:site_name" content="Decodificar: COVID19">
<meta property="og:description" content="¿Cuántos datos hay que mirar para entender la evolución de la pandemia en un país? La respuesta simple es &quot;muchos&quot;. Sin embargo, al combinar dos datos (casos totales y casos nuevos diarios) podemos te">
<meta property="og:locale" content="es_ES">
<meta property="og:image" content="https://decodificar.org/images/13_mundo_redes.jpg">
<meta property="article:published_time" content="2020-11-17T21:35:32.243Z">
<meta property="article:modified_time" content="2020-11-17T21:35:32.243Z">
<meta property="article:author" content="Fundacion Bunge y Born">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://decodificar.org/images/13_mundo_redes.jpg">

<link rel="canonical" href="https://decodificar.org/covid/pandemia_mundial/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'es'
  };
</script>

  <title>¿Cómo entender la evolución de la pandemia en el mundo? | Decodificar: COVID19</title><meta name="robots" content="noindex">
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-132699662-2"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-132699662-2');
      }
    </script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PWMSB36');</script>
<!-- End Google Tag Manager -->






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

      <script src="https://d3js.org/d3.v5.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/stickyfill/2.1.0/stickyfill.js"></script>
      <script src="https://unpkg.com/enter-view"></script>
      <link rel="stylesheet" href="/styles/scrolly.css">
  
</head>

<body itemscope  class="white" itemtype="http://schema.org/WebPage">
      <script>
      var es_ES = {
        "decimal": ",",
        "thousands": ".",
        "grouping": [3],
        "currency": ["$", ""],
        "dateTime": "%a %b %e %X %Y",
        "date": "%d/%m/%Y",
        "time": "%H:%M:%S",
        "periods": ["AM", "PM"],
        "days": ["Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado"],
        "shortDays": ["Dom", "Lun", "Mar", "Mi", "Jue", "Vie", "Sab"],
        "months": ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
        "shortMonths": ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"]
    };

    d3.timeFormatDefaultLocale(es_ES);
    d3.formatDefaultLocale(es_ES);

    var anchoDiv = document.getElementsByTagName("body")[0].clientWidth;
    var isMobile = anchoDiv < 768 ? 1 : 0; 

  var nombresPcias = {
            "CABA":["CABA","CABA"],
            "Buenos_Aires":["Buenos Aires","PBA"],
            "Catamarca":["Catamarca","CAT"],
            "Chaco":["Chaco","CHAC"],
            "Chubut":["Chubut","CHUB"],
            "Cordoba":["Córdoba","CBA"],
            "Corrientes":["Corrientes","COR"],
            "Entre_Rios":["Entre Ríos","ER"],
            "Formosa":["Formosa","FORM"],
            "Jujuy":["Jujuy","JUJ"],
            "La_Pampa":["La Pampa","PAMP"],
            "La_Rioja":["La Rioja","RIOJ"],
            "Mendoza":["Mendoza","MEND"],
            "Misiones":["Misiones","MIS"],
            "Neuquen":["Neuquén","NEU"],
            "Rio_Negro":["Río Negro","RN"],
            "Salta":["Salta","SAL"],
            "San_Juan":["San Juan","SJuan"],
            "San_Luis":["San Luis","SLuis"],
            "Santa_Cruz":["Santa Cruz","Scruz"],
            "Santa_Fe":["Santa Fe","SFe"],
            "Santiago_del_Estero":["Sgo del Estero","SEst"],
            "Tierra_del_fuego":["T. del Fuego","TFuego"],
            "Tucuman":["Tucumán","TUC"]

        }


var codigoColor = d3.scaleOrdinal()
        .domain(["azul","violeta","rojo","naranja","verde","celeste"])
        .range(["#00468B","#8B6BAF","#F04E53","#F26522","#62BB46","#5badd4"]);



var colores = d3.scaleOrdinal()
        .domain([0,5])
        //azul -  violeta - rojo  - naranja - verde
        .range(["#00468B","#8B6BAF","#F04E53","#F26522","#62BB46"]);

//window.onresize = function(){ location.reload(); }

var coloreaCategorias = d3.scaleOrdinal()
        .range(["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#af7aa1","#ff9da7","#9c755f","#8a7e78"]);

      </script>

  

  <div class="container use-motion">
    <div class="headband"></div>

    <main class="main">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner"><div class="site-brand-container">


  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <img src="/images/logo-web.png">
<!--       <i class="logo-line"></i>
      <h1 class="site-title">Decodificar: COVID19</h1>
      <i class="logo-line"></i> -->
    </a>
      <p class="site-subtitle" itemprop="description">Entendiendo la pandemia</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>

    <div class="site-nav-toggle">
    <div class="toggle" aria-label="Cambiar a barra de navegación">
        <span class="toggle-line toggle-line-first"></span>
        <span class="toggle-line toggle-line-middle"></span>
        <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-inicio">

    <a href="/" rel="section">Inicio</a>

  </li>
        <li class="menu-item menu-item-acerca-del-proyecto">

    <a href="/about/" rel="section">Acerca del proyecto</a>

  </li>
  </ul>
</nav>




</div>
      </header>

      
  <div class="reading-progress-bar"></div>

<noscript>
  <div id="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


      <div class="main-inner">
        

        <div class="content post posts-expand">
          

    
  
  
      
 <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="es">
    <link itemprop="mainEntityOfPage" href="https://decodificar.org/covid/pandemia_mundial/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Fundacion Bunge y Born">
      <meta itemprop="description" content="Decodificar es un sitio para que todos, sin importar cuánto sepamos de datos, tengamos herramientas que nos ayuden a entender lo que pasa a nuestro alrededor. En esta edición especial te acercamos herramientas simples y potentes para leer noticias y otros contenidos relacionados con la pandemia del COVID-19">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Decodificar: COVID19">
    </span>
      <header class="post-header">
      <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar-check"></i>
              </span>
              <!-- <span class="post-meta-item-text">Editado el</span> -->
              <time title="Modificado por: 17 de noviembre de 2020 18" itemprop="dateModified" datetime="2020-11-17T18:35:32-03:00">Publicado el 17 de noviembre de 2020</time>
            </span>

          

         
        </div>


          <h1 class="post-title" itemprop="name headline">
          ¿Cómo entender la evolución de la pandemia en el mundo?
        </h1>
            <div class="post-description">¿Cuántos datos hay que mirar para entender la evolución de la pandemia en un país? La respuesta simple es "muchos". Sin embargo, al combinar dos datos (casos totales y casos nuevos diarios) podemos tener una visión más global de la pandemia, mucho mejor que mirando estos datos por separado.</div>

          
          
           
                      <div class="compartir">Compartir:
                        <a  href="https://www.facebook.com/sharer/sharer.php?u=https://decodificar.org/covid/pandemia_mundial/&quote=¿Cómo entender la evolución de la pandemia en el mundo?" target="_blank" title="Share on Facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURI(https://decodificar.org/covid/pandemia_mundial/) + '&quote=' + encodeURI(¿Cómo entender la evolución de la pandemia en el mundo?); return false;"><i class="fab fa-facebook" aria-hidden="true"></i></a>
                        <a href="https://twitter.com/intent/tweet?text=¿Cómo entender la evolución de la pandemia en el mundo?%20&url=https://decodificar.org/covid/pandemia_mundial/" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURI(¿Cómo entender la evolución de la pandemia en el mundo?) + '&url='+ encodeURI(https://decodificar.org/covid/pandemia_mundial/) ; return false;"><i class="fab fa-twitter" aria-hidden="true"></i></a>
                        <a href="https://api.whatsapp.com/send?text=¿Cómo entender la evolución de la pandemia en el mundo? https://decodificar.org/covid/pandemia_mundial/" target="_blank" ><i class="fab fa-whatsapp" aria-hidden="true"></i></a>
                      </div>
           

      </header>



    
    
    
    <div class="post-body" itemprop="articleBody">
<!-- imagen destacada -->
        
      
        


<style>

    .nada{
        fill:#4e79a7;
        fill:#f28e2c;
        fill:#e15759;
        fill:#76b7b2;
        fill:#59a14f;
        fill:#af7aa1;
        fill:#ff9da7;
        fill:#9c755f;
        fill:#8a7e78;

    }

    .axis path, .axis line {
      fill: none;
      stroke: #D4D8DA;
      stroke-width: 1px;
     
    }

/*     .axis--y .domain, .axis--x .domain{
        display: none;
    }
 */    
    
   

    .axis--y .tick{
        stroke-width: 1px;
        stroke-dasharray: 3px 2px;
    }

    .axis--x .tick line{
        stroke-width: 2px;
    }

    
    text.titulo {
            font-size: 12px;
            fill: #444;
        }


    .axis-title {
        font-size: 12px;
        text-anchor: start;
        fill: black;
    }
    
    .axis-title.der{
        text-anchor: middle;
    }

    .linea {
      fill: none;
      stroke: #a3a3a3;
      stroke-width: 2px;
    }


    .label.naranja{
        background: #ffb491;

    }

    .label.verde{
        background: #a4eb8e;
    }

    
    .label.verdeFuerte{
        background: #62BB46;
    }

    .label.gris{
        background: #555;
        color:white;
    }


    .label.azul{
        background: #00468B;
        color:white;
    }

    .label.violeta{
        background: #8B6BAF;
        color:white;
    }

    
    .label.rojo{
        background: #F04E53;
        color:white;
    }

    .label.rebrote{
        background: #f28e2c;
    }

    .labelPaises{
        font-size: 10px;
    }

    .linea.casos.pais{
        stroke-width: 1px;
    }

    .linea.casos.recta{
        stroke-width: 4px;
    }
    
    #ejeX.resaltado text.axis-title, #ejeX.resaltado text, #ejeY.resaltado text.axis-title, #ejeY.resaltado text, #ejeX.resaltado .domain{
        stroke:#ffb491;
        stroke-width: 5px;
        stroke-linejoin: round;
       
        paint-order: stroke;
        transition: fill 0.5s, stroke 0.5s, stroke-width 0.5s;
    }

    #ejeY.resaltado text.axis-title,#ejeY.resaltado text, #ejeY.resaltado .domain{
        stroke:#a4eb8e;
    }    


    @media only screen and (min-width: 768px) {
  
        text.titulo {
            font-size: 14px;
            fill: #444;
        }
    }
    

/* COLORES
azul #00468B
violeta #8B6BAF
rojo #F04E53
naranja #F26522
verde #62BB46
*/
       
</style>


<section id='scrolly1'>
    <div class='scrolly'>
        <!-- aca va el grafico que va a quedar fijo -->
        <figure id="grafico1" class='sticky contenedorGrafico' >
        </figure>

        <!-- acá van los textos de cada paso -->
        <article>
            <div class='step' data-index='0'>
                <p>El número de casos por millón de habitantes es un dato que vemos seguido. Como indicador de evolución de la pandemia sabemos que, en general, tener mayor número de casos es peor.
                    <br/><br/>
                    ¿Qué pasa entonces con los países que tienen gran número de casos totales pero relativamente pocos casos nuevos diarios? ¿Y los que tienen muchos casos nuevos diarios pero pocos casos totales?
                </p>
            </div>
            
            <div class='step' data-index='1'>
                <p>
                    Para responder eso tenemos que combinar ambos datos. En el eje horizontal vamos a <mark class="label naranja">poner el número de casos totales por millón de habitantes</mark> de cada país, desde el comienzo de la pandemia hasta ahora.
                    <br/><br/>
                    En el eje vertical vamos a poner, para cada dato del eje horizontal, <mark class="label verde">el número de casos nuevos diarios que le corresponde</mark>, también por millón de habitantes.
                </p>
            </div>
            <div class='step' data-index='2'>
                <p>
                    Notá que el tiempo desaparece en este gráfico: está implícito al recorrer la curva de cada país desde su comienzo hasta su final. Al comienzo, todos los países tenían pocos casos totales y pocos casos nuevos diarios; más adelante en la pandemia ambos datos fueron creciendo de distinta forma en cada país.
                    <br/><br/>
                    Veamos qué tipos de comportamientos podemos encontrar.
                       </p>
            </div>
            <div class='step' data-index='3'>
                <p>
                    En este gráfico, si un país tiene un recorrido en diagonal significa que está en <a href="https://decodificar.org/covid/record_de_contagios/" target="_blank">crecimiento exponencial</a>: el número de casos nuevos es proporcional al número de casos totales.
                    <br/><br/>
                    Todos los países comenzaron de esta forma: <mark class="label gris">recorriendo la diagonal principal</mark>, con un <a href="https://decodificar.org/covid/el_ritmo_de_la_pandemia/" target="_blank">tiempo de duplicación</a> muy corto de aproximadamente 3 días. Es decir, este escenario es cuando no había control de la pandemia.
                </p>
            </div>
            <div class='step' data-index='4'>
                <p>
                    Gracias a medidas de contención y mitigación, muchos países, como Argentina, lograron correrse a <mark class="label azul">diagonales más bajas</mark>.
                    <br/><br/>
                    ¿Qué significa esto? Que el crecimiento del número de casos sigue siendo exponencial, pero con un ritmo menor (tiempo de duplicación más largo).
                </p>
            </div>
            <div class='step' data-index='5'>
                <p>
                    Unos pocos casos lograron controlar casi completamente la propagación del virus, como por ejemplo Nueva Zelanda.
                    <br/><br/>
                    Estos países no solo se apartaron de la diagonal principal, sino que <mark class="label violeta">"doblaron la curva" y lograron un comportamiento hacia abajo</mark> (donde el número de casos totales casi no crece, salvo que ocurra un rebrote).
                </p>
            </div>
            <div class='step' data-index='6'>
                <p>
                    Otros países, como Estados Unidos, lograron salir del crecimiento exponencial pero siguen creciendo pues el número de casos nuevos diarios se mantiene aproximadamente constante (se ve que la curva <mark class="label rojo">se hizo aproximadamente horizontal</mark>).
                </p>
            </div>
            <div class='step' data-index='7'>
                <p>
                    ¿Y cómo se ven los <mark class="label verdeFuerte">rebrotes</mark> en este gráfico? Como una curva que parecía haber sido controlada (tramo hacia abajo), pero volvió a crecimiento exponencial (vuelve a recorrer alguna de las diagonales). El primer ejemplo fue Singapur.
                </p>
            </div>
            <div class='step' data-index='8'>
                <p>
                    La realidad es compleja. Este ejercicio de simplificación e idealización nos permite interpretar la evolución de cada país en términos de estos "comportamientos elementales" (crecimiento exponencial, <mark class="label rojo">crecimiento constante</mark>, <mark class="label violeta">control</mark>) y sus combinaciones (por ejemplo un <mark class="label verdeFuerte">rebrote</mark>).
                </p>
            </div>
        </article>
    </div>
</section>

 <!-- Scripts -->
 <script>
    
//********************* CARGA DATOS ************

Promise.all([
//    d3.csv("https://datos.decodificar.org/E7_comportamientos_elementales_sin_actualizar.csv"),
  //  d3.csv("https://datos.decodificar.org/E7_comportamientos_elementales_actualizado.csv"),
    d3.csv("https://datos.decodificar.org/E7_comportamientos_elementales.csv"),
    d3.csv("https://datos.decodificar.org/metaData_tablas_nueva.csv")

]).then(function(files) {

  var epigrafeData = files[files.length-1].filter(d=>d.id_historia=="E7");
        epigrafeData.forEach(e => {
            e.fecha = d3.timeFormat("%-d/%b/%Y")(d3.timeParse("%Y-%m-%d")(e.fecha_actualizacion)).toLowerCase(); 
        });

    // **** CODIGO DEL SCROLLY *******


    const container1 = d3.select('#scrolly1'); //busco el container total
	
    const stepSel1 = container1.selectAll('.step'); // selecciono los "steps"
	
    function updateChart(index, what,containerNumber,entra) {  // funcion que llama cada vez que cruza un umbral
        const sel = d3.select('#scrolly'+containerNumber).select(`[data-index='${index}']`);
        what.classed('is-active', (d, i) => i === index);
        scrollyTelling(containerNumber,index,entra); // <<<<< AQUI LLAMA AL GRAFICO VERDADERO
    }

    function init(what,containerNumber) { // configuracion inicial
        Stickyfill.add(d3.select('.sticky').node()); // fallback para browsers sin sticky

        enterView({
            selector: what.nodes(),
            offset: 0.5,
            enter: el => {
                const index = +d3.select(el).attr('data-index');
                updateChart(index,what,containerNumber,1);
            },
            exit: el => {
                let index = +d3.select(el).attr('data-index');
                index = Math.max(0, index - 1);
                updateChart(index,what,containerNumber,0);
            }
        });
    }
  

    // **** END SCROLLY *******

//iso_code	location	pais_corto	date	casos_diarios_por_millon_prom	casos_acumulados_por_millon

var groups = {
    "d1":"g0",
    "d2":"g1",
    "ARG":"g1",
    "ct":"g2",
    "AUS":"g2",
    "NZL":"g2",
    "CHN":"g2",
    "cs":"g3",
    "URY":"g3",
    "USA":"g3",
    "BRA":"g3",
    "IND":"g3",
    "COL":"g3",
    "CHL":"g3",
    "rb":"g4",
    "ESP":"g4",
    "ISR":"g4",
    "FRA":"g4",
    "GBR":"g4",
    "ITA":"g4",
    "NOR":"g4",
    "SWE":"g4",
    "DEU":"g4",
    "SGP":"g4",
    "FIN":"g4"
}

var coloresGroups = d3.scaleOrdinal()
        .domain(["g0","g1","g2","g3","g4"])
        //azul -  violeta - rojo - verde
        .range(["#555","#00468B","#8B6BAF","#F04E53","#62BB46"]);



var parseTime = d3.timeParse("%Y-%m-%d");

var paisesSelectos = ["ARG","SGP", "NZL", "USA"];

var dataOrig =  files[0].map(obj => {
                return {
                                "iso":obj.iso_code,
                                "name":obj.location,
                                "casos":obj.iso_code.length==2?+obj.casos_acumulados_por_millon:+obj.casos_diarios_por_millon_prom,
                                "total":obj.iso_code.length==2?+obj.casos_diarios_por_millon_prom:+obj.casos_acumulados_por_millon,
                                "startOp":paisesSelectos.indexOf(obj.iso_code)>=0?1:0,
                                "group":groups[obj.iso_code]
                                }
            });
console.log(dataOrig)

            
           data = d3.nest()
                .key(d => d.iso)
                .rollup( d=> {
                    return {
                    "valores": d.map(r=>{return {"casos":r.casos, "total":r.total}}),
                    "startOp":d[0].startOp,
                    "name":d[0].name,
                    "group":d[0].group
                }})
                .entries(dataOrig);


           console.log(data);
        
var ejeY, ejeX, tituloY, minDate, maxDate, line;


var altoMaximo = 1.5; // cuantas veces el ancho permitimos que sea el alto maximo


var svg = d3.selectAll(".contenedorGrafico").append("svg"),
    margin = isMobile ? {top: 55, right: 20, bottom: 35, left: 20} : {top: 70, right: 40, bottom: 55, left: 40},
    width =  +d3.select('#grafico1').style('width').slice(0, -2),
    height = +d3.select('#grafico1').style('height').slice(0, -2)-25;

 d3.selectAll(".contenedorGrafico").append("div").attr("class","epigrafe")
            .html((d,i)=>{
                var cual = i?1:0;
                return "www.decodificar.org - "+epigrafeData[cual].fecha+" - Fuente: "+ epigrafeData[cual].fuente}
                );


    if (height > altoMaximo*width) {
        svg.style('margin-top', (height - altoMaximo*width)/2 + "px")
        height = altoMaximo*width;
    }

    svg.attr("viewBox", [0, 0, width, height]);


    height = height - margin.top - margin.bottom;
    width = width - margin.left - margin.right;
    

    var clip = svg.append("defs").append("svg:clipPath")
        .attr("id", "clip")
        .append("svg:rect")
        .attr("width", width-1 )
        .attr("height", height-1 )
        .attr("x", 1)
        .attr("y", 1);


var x = d3.scaleLog()
        .domain([1, d3.max(dataOrig, d=>d.total)])
        .range([0,width-25]);


var y = d3.scaleLog()
        .domain([0.1, d3.max(dataOrig, d=>d.casos)])
        .range([height, 0]);



var line = d3.line()
        .defined(d =>d.casos>0.1&&d.total>0.5)
        .x(d=>x(d.total))
        .y(d=>y(d.casos))
        .curve(d3.curveBasis);
;

        
var yAxis = d3.axisRight(y)
    .ticks(3).tickFormat(d3.format(",d")).tickSizeInner(0)
;

var xAxis = d3.axisBottom(x)
    .ticks(4).tickFormat(d3.format(",d")).tickSizeInner(0)
;



var dataParaLabels = data.filter(d=>d.key.length>2).map(r=>{  //Prepara la data para poner los labels
                    return  {"labelY": y(r.value.valores[r.value.valores.length-1].casos),
                            "labelX": x(r.value.valores[r.value.valores.length-1].total),
                            "name":isMobile?r.key:r.value.name,
                            "startOp":r.value.startOp,
                            "group":r.value.group
                        }
                        });

    //relax(dataParaLabels, 9); // Separa los labels para que no se pisen


var gInterno = svg.append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
        .attr("id","gInterno")
	;

    var ejeY = gInterno.append("g") // EJE Y
                .attr("id", "ejeY")
                .attr("class", "axis axis--y")
                .call(yAxis)
                .append("text").text("Casos diarios por millón (log)")
                    .attr("class","axis-title")
                    .attr("dy", -10);

    var ejeX = gInterno.append("g") // EJE X
                .attr("id", "ejeX")
                .attr("class", "axis axis--x")
                .attr("transform", "translate(0," + (height+5) + ")")
                .call(xAxis)
                .append("text")
                .text("Casos acumulados por millón (log)")
                    .attr("y",30).attr("x", width/2)
                    .attr("class","axis-title der")
        ;

                

    

    var paises = gInterno.append("g").attr("id","paises").attr("clip-path", "url(#clip)");
;

    
    paises.selectAll("path")
                .data(data.filter(d=>d.key.length>2))
                .join("path")
                    .attr("class", "linea casos pais")
                    .style("stroke", d=>coloresGroups(d.value.group))
                    .style("opacity", d=>d.value.startOp)
                    .attr("id", e=>e.key)
                    .attr("d", d=> line(d.value.valores));


    paises.selectAll("text")  // AGREGA LOS LABELS
				.data(dataParaLabels)
				.join("text")
					.attr("x",d=>d.labelX)
					.attr("y",d=>d.labelY)
					.attr("dy", "3px")
					.attr("dx", "3px")
                    .style("fill",  d=>coloresGroups(d.group))
                    .style("opacity", d=>d.startOp)
					.attr("class", "prov labelPaises")
                    .text(d=>d.name); //
                    
    gInterno.append("g").attr("id","rectas").attr("clip-path", "url(#clip)")
.selectAll("path")// AGREGA LAS LINEAS MODELADAS
                .data(data.filter(d=>d.key.length<3))
                .join("path")
                    .attr("class", "linea casos recta")
                    .style("stroke",  d=>coloresGroups(d.value.group))
                    .style("opacity", 0)
                    .attr("id", e=>e.key)
                    .attr("d", d=> line(d.value.valores));
                    

                                      

    
    init(stepSel1,1)

    


function scrollyTelling(containerNumber,step,entra){


	if(containerNumber == 1){  
        var recta = 0;
        switch (step) {
            
            case 0: //
            d3.selectAll("#ejeY, #ejeX").classed("resaltado",false)
            break;

            case 1: //resaltamos los ejes
                 d3.selectAll("svg").selectAll("#ejeY, #ejeX").classed("resaltado",true)
            break;

            case 2: //apagamos ejes
            d3.selectAll("#ejeY, #ejeX").classed("resaltado",false)
            break;

            case 3: //prende diagonal1
                recta = "d1";
            break;

            case 4: //prende diagonal1
                recta = "d2";
            break;

            case 5: //prende diagonal1
                recta = "ct";
            break;

            case 6: //prende diagonal1
                recta = "cs";
            break;

            case 7: //prende diagonal1
                recta = "rb";
                d3.selectAll(".labelPaises").filter(d=>!d.startOp).transition().duration(600).style("opacity",0)
                d3.selectAll(".pais").filter(d=>!d.value.startOp).transition().duration(600).style("opacity",0)
            break;

            case 8: //prende diagonal1
                d3.selectAll(".labelPaises, .pais").transition().duration(600).delay((d,i)=>i*30).style("opacity",1)
            break;
        }


        d3.selectAll(".recta").transition().duration(600).style("opacity",d=>d.key==recta?1:0)
        d3.select("#paises").transition().duration(600)
            .style("opacity",recta?0.5:1);


      
  
	}
          

}



//********** funciones


// separa en el eje Y los datos que le lleguen con formato: 
// d.name // d.labelY 
function relax(dataInterna, spacing) {
				spacing = spacing? spacing : 8;
				var dy = 1;
				var repeat = false;
				var count = 0;
				dataInterna.forEach(function(dA, i) {
					var yA = dA.labelY;
					dataInterna.forEach(function(dB, j) {
						var yB = dB.labelY;
						if (i === j) {
							return;
						}
						diff = yA - yB;
						if (Math.abs(diff) > spacing) {
							return;
						}
						repeat = true;
						magnitude = diff > 0 ? 1 : -1;
						adjust = magnitude * dy;
						dA.labelY = +yA + adjust;
						dB.labelY = +yB - adjust;
						dB.labelY = dB.labelY > height ? height : dB.labelY
						dA.labelY = dA.labelY > height ? height : dA.labelY
					})
				})
				if (repeat) {
					relax(dataInterna, spacing);
				}
			}

            function movingAverage(values) {
                console.log(values);
                let N = 7;
                let i = 0;
                let sum = 0;
                const means = new Float64Array(values.length).fill(NaN);
                for (let n = Math.min(N - 1, values.length); i < n; ++i) {
                    sum += values[i];
                }
                for (let n = values.length; i < n; ++i) {
                    sum += values[i];
                    means[i] = sum / N;
                    sum -= values[i - N + 1];
                }
                return means;
                }

  

});

</script>



<div class="note info"><p>Para entender la evolución de la pandemia hay muchos datos que podemos mirar. Combinarlos, visualizarlos de determinadas maneras y compararlos con otros nos permite obtener más información que analizarlos de forma individual.</p>
</div><!-- flag of hidden posts -->
    </div>
                      <div class="compartir">Compartir:
                        <a  href="https://www.facebook.com/sharer/sharer.php?u=https://decodificar.org/covid/pandemia_mundial/&quote=¿Cómo entender la evolución de la pandemia en el mundo?" target="_blank" title="Share on Facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURI(https://decodificar.org/covid/pandemia_mundial/) + '&quote=' + encodeURI(¿Cómo entender la evolución de la pandemia en el mundo?); return false;"><i class="fab fa-facebook" aria-hidden="true"></i></a>
                        <a href="https://twitter.com/intent/tweet?text=¿Cómo entender la evolución de la pandemia en el mundo?%20&url=https://decodificar.org/covid/pandemia_mundial/" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURI(¿Cómo entender la evolución de la pandemia en el mundo?) + '&url='+ encodeURI(https://decodificar.org/covid/pandemia_mundial/) ; return false;"><i class="fab fa-twitter" aria-hidden="true"></i></a>
                        <a href="https://api.whatsapp.com/send?text=¿Cómo entender la evolución de la pandemia en el mundo? https://decodificar.org/covid/pandemia_mundial/" target="_blank" ><i class="fab fa-whatsapp" aria-hidden="true"></i></a>

                      </div>

    
    
    

      <footer class="post-footer">

        


        
      </footer>
    
  </article>
  
  
  



        </div>
        

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        <!-- <div class="firma"> -->

<!-- <a href="/">
  Inicio</a> 
  &mdash;
  <a href="/about/">
    Acerca del proyecto</a>
</div> -->

<div class="firma">
  <img src="/images/logo_small.png"> 
  Un proyecto de la <a href="https://www.fundacionbyb.org/" target="_blank">Fundación Bunge y Born</a>, en alianza con  <a href="http://expedicionciencia.org.ar/" target="_blank">Expedición Ciencia</a>
</div>

<div class="redes">
<a href="https://www.facebook.com/fundacionbungeyborn/" target="_blank"><i class="fab fa-facebook-square"></i></a>
<a href="https://www.instagram.com/fundacionbungeyborn/" target="_blank"><i class="fab fa-instagram-square"></i></a>
<a href="https://www.linkedin.com/company/fundacion-bunge-y-born/" target="_blank"><i class="fab fa-linkedin"></i></a>
</div>


<div class="reporte">
<a href="/about/#Contacto">
  Recibí novedades</a>
</div>


<div class="copyright">
  <span itemprop="copyrightYear">&copy; 2020</span>
  <span class="author" itemprop="copyrightHolder">Fundación Bunge y Born</span>
 / <a href="https://www.fundacionbyb.org/politica-de-privacidad" target="_blank">Política de privacidad</a>
</div>

<div class="powered-by">
Creado con <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a>
&amp; <a href="https://theme-next.js.org/mist/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>


  















  

  

</body>
</html>
