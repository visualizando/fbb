<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="Gy0v5fPBzo8V6kQn7oOcPhNXVas7zpn5e7eVTANnKBM">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather:300,300italic,400,400italic,700,700italic|Oswald:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  
  <link rel="stylesheet" href="/lib/animate-css/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"decodificar.org","root":"/","scheme":"Mist","version":"8.0.0-rc.4","exturl":false,"sidebar":{"position":"left","display":"remove","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeIn","post_body":"none","coll_header":"fadeIn","sidebar":"fadeInUp"}},"path":"search.xml"};
  </script>

  <meta name="description" content="El número de personas fallecidas por COVID-19 nos da información más confiable, en ciertos sentidos, que el número de casos confirmados. ¿Tiene inconvenientes? También.">
<meta property="og:type" content="article">
<meta property="og:title" content="¿Qué nos dice el número de fallecimientos?">
<meta property="og:url" content="https://decodificar.org/covid/numero_de_fallecimientos/index.html">
<meta property="og:site_name" content="Decodificar: COVID19">
<meta property="og:description" content="El número de personas fallecidas por COVID-19 nos da información más confiable, en ciertos sentidos, que el número de casos confirmados. ¿Tiene inconvenientes? También.">
<meta property="og:locale" content="es_ES">
<meta property="og:image" content="https://decodificar.org/images/08_nro_fallecimientos_redes.jpg">
<meta property="article:published_time" content="2020-09-09T03:00:00.000Z">
<meta property="article:modified_time" content="2020-09-09T03:00:00.000Z">
<meta property="article:author" content="Fundacion Bunge y Born">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://decodificar.org/images/08_nro_fallecimientos_redes.jpg">

<link rel="canonical" href="https://decodificar.org/covid/numero_de_fallecimientos/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'es'
  };
</script>

  <title>¿Qué nos dice el número de fallecimientos? | Decodificar: COVID19</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-132699662-2"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-132699662-2');
      }
    </script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PWMSB36');</script>
<!-- End Google Tag Manager -->






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

      <script src="https://d3js.org/d3.v5.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/stickyfill/2.1.0/stickyfill.js"></script>
      <script src="https://unpkg.com/enter-view"></script>
      <link rel="stylesheet" href="/styles/scrolly.css">
  
</head>

<body itemscope  class="white" itemtype="http://schema.org/WebPage">
      <script>
      var es_ES = {
        "decimal": ",",
        "thousands": ".",
        "grouping": [3],
        "currency": ["$", ""],
        "dateTime": "%a %b %e %X %Y",
        "date": "%d/%m/%Y",
        "time": "%H:%M:%S",
        "periods": ["AM", "PM"],
        "days": ["Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado"],
        "shortDays": ["Dom", "Lun", "Mar", "Mi", "Jue", "Vie", "Sab"],
        "months": ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
        "shortMonths": ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"]
    };

    d3.timeFormatDefaultLocale(es_ES);
    d3.formatDefaultLocale(es_ES);

    var anchoDiv = document.getElementsByTagName("body")[0].clientWidth;
    var isMobile = anchoDiv < 768 ? 1 : 0; 

  var nombresPcias = {
            "CABA":["CABA","CABA"],
            "Buenos_Aires":["Buenos Aires","PBA"],
            "Catamarca":["Catamarca","CAT"],
            "Chaco":["Chaco","CHAC"],
            "Chubut":["Chubut","CHUB"],
            "Cordoba":["Córdoba","CBA"],
            "Corrientes":["Corrientes","COR"],
            "Entre_Rios":["Entre Ríos","ER"],
            "Formosa":["Formosa","FORM"],
            "Jujuy":["Jujuy","JUJ"],
            "La_Pampa":["La Pampa","PAMP"],
            "La_Rioja":["La Rioja","RIOJ"],
            "Mendoza":["Mendoza","MEND"],
            "Misiones":["Misiones","MIS"],
            "Neuquen":["Neuquén","NEU"],
            "Rio_Negro":["Río Negro","RN"],
            "Salta":["Salta","SAL"],
            "San_Juan":["San Juan","SJuan"],
            "San_Luis":["San Luis","SLuis"],
            "Santa_Cruz":["Santa Cruz","Scruz"],
            "Santa_Fe":["Santa Fe","SFe"],
            "Santiago_del_Estero":["Sgo del Estero","SEst"],
            "Tierra_del_fuego":["T. del Fuego","TFuego"],
            "Tucuman":["Tucumán","TUC"]

        }


var codigoColor = d3.scaleOrdinal()
        .domain(["azul","violeta","rojo","naranja","verde","celeste"])
        .range(["#00468B","#8B6BAF","#F04E53","#F26522","#62BB46","#5badd4"]);



var colores = d3.scaleOrdinal()
        .domain([0,5])
        //azul -  violeta - rojo  - naranja - verde
        .range(["#00468B","#8B6BAF","#F04E53","#F26522","#62BB46"]);

//window.onresize = function(){ location.reload(); }

var coloreaCategorias = d3.scaleOrdinal()
        .range(["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#af7aa1","#ff9da7","#9c755f","#8a7e78"]);

      </script>

  

  <div class="container use-motion">
    <div class="headband"></div>

    <main class="main">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner"><div class="site-brand-container">


  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <img src="/images/logo-web.png">
<!--       <i class="logo-line"></i>
      <h1 class="site-title">Decodificar: COVID19</h1>
      <i class="logo-line"></i> -->
    </a>
      <p class="site-subtitle" itemprop="description">Entendiendo la pandemia</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>

    <div class="site-nav-toggle">
    <div class="toggle" aria-label="Cambiar a barra de navegación">
        <span class="toggle-line toggle-line-first"></span>
        <span class="toggle-line toggle-line-middle"></span>
        <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-inicio">

    <a href="/" rel="section">Inicio</a>

  </li>
        <li class="menu-item menu-item-acerca-del-proyecto">

    <a href="/about/" rel="section">Acerca del proyecto</a>

  </li>
  </ul>
</nav>




</div>
      </header>

      
  <div class="reading-progress-bar"></div>

<noscript>
  <div id="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


      <div class="main-inner">
        

        <div class="content post posts-expand">
          

    
  
  
      
 <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="es">
    <link itemprop="mainEntityOfPage" href="https://decodificar.org/covid/numero_de_fallecimientos/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Fundacion Bunge y Born">
      <meta itemprop="description" content="Decodificar es un sitio para que todos, sin importar cuánto sepamos de datos, tengamos herramientas que nos ayuden a entender lo que pasa a nuestro alrededor. En esta edición especial te acercamos herramientas simples y potentes para leer noticias y otros contenidos relacionados con la pandemia del COVID-19">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Decodificar: COVID19">
    </span>
      <header class="post-header">
      <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar-check"></i>
              </span>
              <!-- <span class="post-meta-item-text">Editado el</span> -->
              <time title="Modificado por: 9 de septiembre de 2020 00" itemprop="dateModified" datetime="2020-09-09T00:00:00-03:00">Publicado el 9 de septiembre de 2020</time>
            </span>

          

         
        </div>


          <h1 class="post-title" itemprop="name headline">
          ¿Qué nos dice el número de fallecimientos?
        </h1>
            <div class="post-description">El número de personas fallecidas por COVID-19 nos da información más confiable, en ciertos sentidos, que el número de casos confirmados. ¿Tiene inconvenientes? También.</div>

          
          
           
                      <div class="compartir">Compartir:
                        <a  href="https://www.facebook.com/sharer/sharer.php?u=https://decodificar.org/covid/numero_de_fallecimientos/&quote=¿Qué nos dice el número de fallecimientos?" target="_blank" title="Share on Facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURI(https://decodificar.org/covid/numero_de_fallecimientos/) + '&quote=' + encodeURI(¿Qué nos dice el número de fallecimientos?); return false;"><i class="fab fa-facebook" aria-hidden="true"></i></a>
                        <a href="https://twitter.com/intent/tweet?text=¿Qué nos dice el número de fallecimientos?%20&url=https://decodificar.org/covid/numero_de_fallecimientos/" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURI(¿Qué nos dice el número de fallecimientos?) + '&url='+ encodeURI(https://decodificar.org/covid/numero_de_fallecimientos/) ; return false;"><i class="fab fa-twitter" aria-hidden="true"></i></a>
                        <a href="https://api.whatsapp.com/send?text=¿Qué nos dice el número de fallecimientos? https://decodificar.org/covid/numero_de_fallecimientos/" target="_blank" ><i class="fab fa-whatsapp" aria-hidden="true"></i></a>
                      </div>
           

      </header>



    
    
    
    <div class="post-body" itemprop="articleBody">
<!-- imagen destacada -->
        
      
        


<style>

    .nada{
        fill:#4e79a7;
        fill:#f28e2c;
        fill:#e15759;
        fill:#76b7b2;
        fill:#59a14f;
        fill:#af7aa1;
        fill:#ff9da7;
        fill:#9c755f;
        fill:#8a7e78;

    }

    .axis path, .axis line {
      fill: none;
      stroke: #D4D8DA;
      stroke-width: 1px;
     
    }

    .axis--y .domain, .axis--x .domain{
        display: none;
    }
    
    
    .axis--y .tick{
        stroke-width: 1px;
        stroke-dasharray: 3px 2px;
    }

    .axis--x .tick line{
        stroke-width: 2px;
    }

    
    text.titulo {
            font-size: 12px;
            fill: #444;
        }


    #ejeY,#ejeY  .tick text{
        fill:#00468B;

    }
    #ejeYder, #ejeYder .tick text{
        fill:#F26522;
    }

    .axis-title {
        font-size: 11px;
        text-anchor: start;
    }
    
    .axis-title.der{
        text-anchor: end;
    }

    .linea {
      fill: none;
      stroke: #a3a3a3;
      stroke-width: 2px;
    }


    .label.naranja{
        background: #F26522;

    }

    .label.azul{
        background: #00468B;
        color:white;

    }

    .label.rebrote{
        background: #f28e2c;
        

    }

    


    @media only screen and (min-width: 768px) {
  
        text.titulo {
            font-size: 14px;
            fill: #444;
        }
    }
    
</style>


<section id='scrolly1'>
    <div class='scrolly'>
        <!-- aca va el grafico que va a quedar fijo -->
        <figure id="grafico1" class='sticky contenedorGrafico' >
        </figure>

        <!-- acá van los textos de cada paso -->
        <article>
            <div class='step' data-index='0'>
                <p>Venimos viendo este gráfico hace bastante tiempo. Sí, es el de número de casos nuevos confirmados por día en Argentina (promedio de los últimos 7 días). Nos interesa mirar <b>este rango de tiempo en especial.</b>
                    <br/><br/>
                    ¿Qué pasa si a este mismo gráfico le agregamos <b>la curva de fallecimientos</b> por COVID-19 por día en Argentina?
                </p>
            </div>
            
            <div class='step' data-index='1'>
                <p>
                    ¿Por qué queremos analizar al mismo tiempo el <mark class="label naranja">número de fallecimientos por COVID-19</mark>? Este dato también es muy importante para evaluar el desarrollo de la pandemia. 
                    <br/><br/>
                    Comparado con el <mark class="label azul">número de casos confirmados</mark>, el dato de fallecimientos <b>depende en menor medida</b> de criterios médicos o epidemiológicos o decisiones políticas y, por lo tanto, vamos a considerarlo un mejor indicador ("proxy") que el número de casos confirmados.
                </p>
            </div>
            <div class='step' data-index='2'>
                <p>
                    Una diferencia, por ejemplo, es que el <mark class="label azul">número de casos confirmados</mark> depende de la cantidad de tests que hagamos o de la definición de “caso sospechoso”, y ambos criterios van cambiando a lo largo de la pandemia. 
                    <br/><br/>
                    <mark class="label naranja">El número de fallecimientos</mark>, en cambio, no depende de dichos criterios. Una persona fallecida, además, debe ser registrada oficialmente frente a los organismos correspondientes.
                       </p>
            </div>
            <div class='step' data-index='3'>
                <p>
                    Pero… hay un problema: <mark class="label naranja">la curva de fallecimientos</mark> casi no se ve, porque la cantidad de casos nuevos y la de fallecimientos diarios son números que están bastante alejados uno del otro en Argentina. Por ejemplo, cuando los casos nuevos subieron por encima de 1000, el número de fallecimientos era de pocas decenas.
                    <br/><br/>
                    ¿Qué podemos hacer para apreciar curvas de valores tan disímiles en un mismo gráfico?
                </p>
            </div>
            <div class='step' data-index='4'>
                <p>
                    Empezamos cambiando la escala del eje vertical (logarítmica) para evidenciar <a href="/covid/el_ritmo_de_la_pandemia/">el ritmo al cual crecen las curvas.</a>
                </p>
            </div>
            <div class='step' data-index='5'>
                <p>
                    Luego le damos un eje propio a cada dato: ponemos el <mark class="label azul">número de casos a la izquierda</mark> y el <mark class="label naranja">número de fallecimientos a la derecha</mark>, eligiendo astutamente los rangos de cada eje.
                </p>
            </div>
            <div class='step' data-index='6'>
                <p>
                    Comparemos entonces estas curvas. Lo primero que observamos es que ambas crecen; ambas tienen un "codo" bien marcado; ambas tienen ritmo similar… 
                    <br/><br/>
                    Salvo pequeñas diferencias en los detalles, y la diferencia de que hay más casos confirmados que fallecimientos, podemos decir que a grandes rasgos ¡son muy parecidas!
                </p>
            </div>
            <div class='step' data-index='7'>
                <p>
                    Lo que observamos es que entre la curva de casos nuevos y la de fallecimientos hay una diferencia aproximada de 12 días. 
                    <br/><br/>
                    Decimos que la curva de fallecimientos está "retrasada" con respecto a la de casos nuevos. Esta similitud se ve al correr la curva de casos nuevos 12 días a la derecha.
                    <br/><br/>
					<img src="/images/e5_tiempos_arg.png">
                </p>
            </div>
            <div class='step' data-index='8'>
                <p>
                    Este retraso tiene sentido. En el <a href="/covid/historia_de_un_caso/">curso de esta enfermedad</a>, hay muchos tiempos involucrados: comienza con el contagio, luego hay un período de varios días sin síntomas, después se realiza un test cuyo resultado también tarda varios días, y luego el curso normal de la enfermedad que después de algunos días más puede terminar en la recuperación o en un fallecimiento.
                </p>
            </div>
            <div class='step' data-index='9'>
                <p>
                    Sin embargo, este retraso entre el número de fallecimientos y el de casos confirmados no es el mismo en todos los países. 
                    <br/><br/>
                    Las diferencias principales son las estrategias de testeo y el tiempo que pasa entre encontrar un caso sospechoso y su eventual confirmación por test.
                </p>
            </div>
        </article>
    </div>
</section>

<section id='scrolly2'>
    <div class='scrolly'>
                    <!-- aca va el grafico que va a quedar fijo -->
                    <figure id="grafico2" class='sticky contenedorGrafico' >
                    </figure>

        <!-- acá van los textos de cada paso -->
        <article>
                    
            <div class='step' data-index='0'>
                <p>
                    El efecto del retraso entre casos confirmados y fallecimientos se ve aún más claro en los países que lograron encontrar el famoso "pico".
                    <br/><br/>
                    Miremos <b>Alemania</b>, por ejemplo, con un retraso de 15 días. Los resultados de los testeos se tienen muy pronto en comparación con otros países.
                    <br/><br/>
					<img src="/images/e5_tiempos_alem.png">
                </p>
            </div>
        </article>
    </div>
</section>

<section id='scrolly3'>
    <div class='scrolly'>
                    <!-- aca va el grafico que va a quedar fijo -->
                    <figure id="grafico3" class='sticky contenedorGrafico' >
                    </figure>

        <!-- acá van los textos de cada paso -->
        <article>
            <div class='step' data-index='0'>
                <p>
                    En <b>España</b> el retraso aproximado entre la curva de casos confirmados y la de fallecimientos es de apenas 6 días. Es decir, la confirmación de casos se da bastante más tarde que en otros países.
                    <br/><br/>
					<img src="/images/e5_tiempos_esp.png">
                </p>
            </div>
            <div class='step' data-index='1'>
                <p>
                    Pero entonces, ¿qué ventaja tiene mirar la curva de fallecimientos? ¿Nos dice algo diferente que la de casos confirmados?
                </p>
            </div>
        </article>
    </div>
</section>

<section id='scrolly4'>
    <div class='scrolly'>
                    <!-- aca va el grafico que va a quedar fijo -->
                    <figure id="grafico4" class='sticky contenedorGrafico' >
                    </figure>

        <!-- acá van los textos de cada paso -->
        <article>
            <div class='step' data-index='0'>
                <p>
                    Miremos el caso de <b>Israel</b>, que luego de haber encontrado el pico <mark class="label rebrote">tuvo un rebrote</mark>. En el rebrote la curva de <mark class="label azul">casos nuevos</mark> crece muy rápido y llega a valores más altos que antes, mientras que la de <mark class="label naranja">fallecimientos</mark> no.
                    <br/><br/>
					<img src="/images/e5_tiempos_isr.png">
                </p>
            </div>
            <div class='step' data-index='1'>
                <p>
                    Esto probablemente se deba a un simple aumento en el número de testeos, lo que produce un aumento en los casos confirmados pero no en los fallecimientos. 
                    <br/><br/>
                    Basados en el número de fallecimientos, podríamos decir que <mark class="label rebrote">el rebrote</mark> en realidad es similar a la primera ola de contagios.
                </p>
            </div>
        </article>
    </div>
</section>

<section id='scrolly5'>
    <div class='scrolly'>
                    <!-- aca va el grafico que va a quedar fijo -->
                    <figure id="grafico5" class='sticky contenedorGrafico' >
                    </figure>

        <!-- acá van los textos de cada paso -->
        <article>
            <div class='step' data-index='0'>
                <p>
                    En cambio, en el caso de <b>Australia</b> el <mark class="label naranja">número de fallecimientos</mark> durante <mark class="label rebrote">el rebrote</mark> crece más rápido que el de <mark class="label azul">casos nuevos confirmados.</mark> Esto podría indicar varias posibles causas, por ejemplo que el virus se está expandiendo en una población más vulnerable como las personas mayores.
                    <br/><br/>
					<img src="/images/e5_tiempos_aus.png">
                </p>
            </div>

        </article>


    </div>

</section>


 <!-- Scripts -->
 <script>
    
//********************* CARGA DATOS ************

Promise.all([
    d3.csv("https://datos.decodificar.org/E4_num_fallecimientos.csv"),
    d3.csv("https://datos.decodificar.org/metaData_tablas.csv")

]).then(function(files) {

    var epigrafeData = files[1].filter(d=>d.file=="E4_num_fallecimientos.csv")[0];
        epigrafeData.fecha = d3.timeFormat("%-d/%b/%Y")(d3.timeParse("%Y-%m-%d")(epigrafeData.fecha)).toLowerCase();


    // **** CODIGO DEL SCROLLY *******


    const container1 = d3.select('#scrolly1'); //busco el container total
	const container2 = d3.select('#scrolly2'); //busco el container total
    const container3 = d3.select('#scrolly3'); //busco el container total
    const container4 = d3.select('#scrolly4'); //busco el container total
    const container5 = d3.select('#scrolly5'); //busco el container total

    const stepSel1 = container1.selectAll('.step'); // selecciono los "steps"
	const stepSel2 = container2.selectAll('.step'); // selecciono los "steps"
    const stepSel3 = container3.selectAll('.step'); // selecciono los "steps"
	const stepSel4 = container4.selectAll('.step'); // selecciono los "steps"
    const stepSel5 = container5.selectAll('.step'); // selecciono los "steps"

    function updateChart(index, what,containerNumber,entra) {  // funcion que llama cada vez que cruza un umbral
        const sel = d3.select('#scrolly'+containerNumber).select(`[data-index='${index}']`);
        what.classed('is-active', (d, i) => i === index);
        scrollyTelling(containerNumber,index,entra); // <<<<< AQUI LLAMA AL GRAFICO VERDADERO
    }

    function init(what,containerNumber) { // configuracion inicial
        Stickyfill.add(d3.select('.sticky').node()); // fallback para browsers sin sticky

        enterView({
            selector: what.nodes(),
            offset: 0.5,
            enter: el => {
                const index = +d3.select(el).attr('data-index');
                updateChart(index,what,containerNumber,1);
            },
            exit: el => {
                let index = +d3.select(el).attr('data-index');
                index = Math.max(0, index - 1);
                updateChart(index,what,containerNumber,0);
            }
        });
    }
  

    // **** END SCROLLY *******


/* COLORES
azul #00468B
violeta #8B6BAF
rojo #F04E53
naranja #F26522
verde #62BB46
*/
       
        
var ejeY, ejeX, tituloY, minDate, maxDate, line;


var altoMaximo = 1.3; // cuantas veces el ancho permitimos que sea el alto maximo

var flechitaPath = 'M88 166.059V468c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12V166.059h46.059c21.382 0 32.09-25.851 16.971-40.971l-86.059-86.059c-9.373-9.373-24.569-9.373-33.941 0l-86.059 86.059c-15.119 15.119-4.411 40.971 16.971 40.971H88z';



var svg = d3.selectAll(".contenedorGrafico").append("svg"),
    margin = isMobile ? {top: 55, right: 20, bottom: 35, left: 20} : {top: 70, right: 30, bottom: 25, left: 30},
    width =  +d3.select('#grafico1').style('width').slice(0, -2),
    height = +d3.select('#grafico1').style('height').slice(0, -2)-25;

    d3.selectAll(".contenedorGrafico").append("div").attr("class","epigrafe")
            .html("www.decodificar.org - "+epigrafeData.fecha+" - Fuente: "+ epigrafeData.fuente);


    if (height > altoMaximo*width) {
        svg.style('margin-top', (height - altoMaximo*width)/2 + "px")
        height = altoMaximo*width;
    }

    svg.attr("viewBox", [0, 0, width, height]);


    height = height - margin.top - margin.bottom;
    width = width - margin.left - margin.right;
    

var parseTime = d3.timeParse("%Y-%m-%d");

var x = d3.scaleTime().range([0, width]);
var y = d3.scaleLinear().range([height, 0]);
var yRight = d3.scaleLinear().range([height, 0]);
var yLog = d3.scaleLog().range([height, 0]);

var yLogRight = d3.scaleLog().range(yLog.range());


var yAxis = d3.axisRight(y)
    .ticks(8).tickFormat(d3.format(",d")).tickSizeInner(0)
;

var yAxisDer = d3.axisLeft(yRight)
    .ticks(8).tickFormat(d3.format(",d")).tickSizeInner(0)
;

var yLogAxis = d3.axisRight(yLog)
                .ticks(4).tickFormat(d3.format(",d")).tickSizeInner(0);

var yLogAxisDer = d3.axisLeft(yLogRight)
                .ticks(30).tickFormat(d3.format(",d")).tickSizeInner(0);




    var tituloGrafico = [". Casos confirmados y fallecimientos diarios",". Casos confirmados y fallecidos diarios"];
    
    var tituloEje = ["Casos confirmados diarios","Fallecimientos diarios"];

    var data =  files[0].map(obj => {
                return {
                                "iso":obj.iso_code,
                                "name":obj.location,
                                "casos":+obj.casos_diarios_prom,
                                "fallecidos":+obj.fallecimientos_diarios_prom,
                                "fecha":parseTime(obj.date)
                                }
            });


svg.append("g")
    	.attr("transform", "translate(" + margin.left + "," + margin.top + ")")
	;

	svg.each(function(d,i){
		d3.select(this).select("g").attr("id","gInterno"+i);
        d3.select(this).append("defs").append("svg:clipPath")
        .attr("id", "clip"+i)
        .append("svg:rect")
        .attr("width", width-40 )
        .attr("height", height )
        .attr("x", 25)
        .attr("y", 0);
	})

    


    dibujaGrafico(data.filter(d=>d.iso=="DEU"), "DEU", true, 1, 15,6000,260,["2020-02-29","2020-07-18"])
    dibujaGrafico(data.filter(d=>d.iso=="ESP"), "ESP", true, 2, 6,9000,1000,["2020-02-29","2020-05-19"])
    dibujaGrafico(data.filter(d=>d.iso=="ISR"), "ISR", true, 3, 11,2000,30,["2020-02-29","2020-07-28"])
    dibujaGrafico(data.filter(d=>d.iso=="AUS"), "AUS", true, 4, 11,1600,16,["2020-03-10","2020-08-12"])

    dibujaGrafico(data.filter(d=>d.iso=="ARG"), "ARG", false, 0, 12,3000,[2,100],["2020-03-10","2020-07-5"])



    function dibujaGrafico(datosPais, pais, finished, scrollyID, retraso, maxEjeIzq, maxEjeDer, rangoFechas){


        var grafico = d3.select("#gInterno"+scrollyID)
    ;

            grafico.append("text")
                .attr("class", "titulo")
                .attr("y", -30)
                .text(datosPais[0].name + (isMobile?tituloGrafico[1]:tituloGrafico[0]));
        console.log(isMobile?tituloGrafico[1]:tituloGrafico[0])
        yLog.domain([1, d3.max(datosPais, d=>d.casos)*1.1]);
        yLogRight.domain([2, 100]);
       
        line = d3.line()
        .defined(d => d.casos>0)

         .x(d => x(d.fecha));

        if(finished){ // para grafico terminado
            x.domain([parseTime(rangoFechas[0]),parseTime(rangoFechas[1])]);
    
            y.domain([0,maxEjeIzq]);

            var ejeY = grafico.append("g") // EJE Y
                .attr("id", "ejeY")
                .attr("class", "axis axis--y")
                .call(yAxis);

            yRight.domain([0,maxEjeDer]);

            var ejeYder = grafico.append("g") // EJE Y derecho
                .attr("id", "ejeYder")
                .attr("class", "axis axis--y")
                .attr("transform", "translate( " + width + ", 0 )")
                .call(yAxisDer);

        }else{ // para grafico de argentina

            x.domain([parseTime(rangoFechas[0]),parseTime(rangoFechas[1])]);
            y.domain([0,3000]);

            var ejeY = grafico.append("g") // EJE Y
                .attr("id", "ejeY")
                .attr("class", "axis axis--y")
                .call(yAxis);

            var ejeYder = grafico.append("g") // EJE Y derecho
                .attr("id", "ejeYder")
                .attr("class", "axis axis--y")
                .attr("transform", "translate( " + width + ", 0 )")
                .style("opacity",0)
                .call(yLogAxisDer);
        }

            ejeX = grafico.append("g") // EJE X
                .attr("class", "axis axis--x")
                .attr("transform", "translate(0," + (height+5) + ")")
                .call(d3.axisBottom(x)
                .ticks(d3.timeMonth.every(1)))
                .call(ajustaMesesEjeX)
                ;

            
            ejeY.append("text")
                .attr("class", "axis-title")
                .attr("y", -11)
                .text(tituloEje[0]);

            ejeYder.append("text")
                .attr("class", "axis-title der")
                .attr("y", -11)
                .text(tituloEje[1]);
            
            

        const lineasContainer = grafico.append("g")
                                       .attr("id","lineas"+ pais)
					            	  .attr("clip-path", "url(#clip"+scrollyID+")");


        var lineaCasos = lineasContainer
				.append("path")
                    .attr("class", "linea casos")
                    .style("stroke", "#00468B40")
                    .style("stroke-width", "1px")
                    .attr("d", line.y(d => y(d.casos))(datosPais));

        var lineaMuertes = lineasContainer
                .append("path")
                    .attr("class", "linea muertos")
                    .attr("opacity",finished?1:0)
                    .style("stroke", "#F26522")
                    .attr("d", finished?line.y(d => yRight(d.fallecidos))(datosPais):line.y(d => y(d.fallecidos))(datosPais));
        

         var lineaCasosDelayed = lineaCasos.clone()
                    .attr("class", "linea casos delayed")
                    .attr("data-retraso",x(d3.timeDay.offset(parseTime(rangoFechas[0]), retraso) ))
                    .style("stroke", "#00468B")
                    .style("stroke-width", "2px")

        if(pais=="ISR"||pais=="AUS"){
            var flechita = grafico.append("g")
                        .attr("transform","translate("+x(parseTime("2020-07-20"))+","+y(500)+") scale(0.08) rotate(135)");

                flechita.append("path").attr("id","flechita")
                        .attr("d", flechitaPath)
                        .style("fill","#f28e2c")
                        ;

                if(pais=="AUS") flechita.attr("transform","translate("+x(parseTime("2020-07-30"))+","+y(800)+") scale(0.08) rotate(135)")
        }
        
        
    }

    
    init(stepSel1,1)
	init(stepSel2,2)
    init(stepSel3,3)
	init(stepSel4,4)
    init(stepSel5,5)


function scrollyTelling(containerNumber,step,entra){


	if(containerNumber == 1){  //GRAFICO PRIMER SCROLLY ARG
        datosPais = data.filter(d=>d.iso=="ARG");
        y.domain([0,3000]);
        x.domain([parseTime("2020-03-10"),parseTime("2020-07-5")]);
        line.x(d => x(d.fecha));
        switch (step) {
            case 0: // INICIO, ES LINEAL
                d3.select("#gInterno0").selectAll(".muertos").transition().duration(600).style("opacity", 0);
            break;

            case 1: // aparece muertes
                d3.select("#gInterno0").selectAll(".muertos").transition().duration(600).style("opacity", 1);
                break;

            case 2: 

            break;

            case 3: // VUELVE A lineal
            y.domain([0,3000]);
            d3.select("#gInterno0").select("#ejeY").transition().duration(600).call(yAxis);
            d3.select("#gInterno0").selectAll(".casos")
                    .transition().duration(600)
                    .attr("d", line.y(d => y(d.casos))(datosPais));

            d3.select("#gInterno0").selectAll(".muertos")
                    .transition().duration(600)
                    .attr("d", line.y(d => y(d.fallecidos))(datosPais));
            break;

            case 4: 
            yLog.domain([1, d3.max(datosPais, d=>d.casos)*1.1]);
            line.defined(d => d.casos>0)
            d3.select("#gInterno0").select("#ejeY").transition().duration(600).call(yLogAxis);
            d3.select("#gInterno0").select("#ejeYder").transition().duration(600).style("opacity",0).call(yLogAxisDer);
                d3.select("#gInterno0").selectAll(".casos")
                    .transition().duration(600)
                    .attr("d", line.y(d => yLog(d.casos))(datosPais));

            line.defined(d => d.fallecidos>0)
                d3.select("#gInterno0").selectAll(".muertos")
                    .transition().duration(600)
                    .attr("d", line.y(d => yLog(d.fallecidos))(datosPais));

            break;

            case 5: 
            yLog.domain([10, 10000]);
            yLogRight.domain([2, 100]);
            line.defined(d => d.casos>0)
            d3.select("#gInterno0").select("#ejeY").transition().duration(600).call(yLogAxis.ticks(3));
            d3.select("#gInterno0").select("#ejeYder").transition().duration(600).style("opacity",1).call(yLogAxisDer);
            d3.select("#gInterno0").selectAll(".casos")
                    .transition().duration(600)
                    .attr("d", line.y(d => yLog(d.casos))(datosPais));

            line.defined(d => d.fallecidos>0)
                d3.select("#gInterno0").selectAll(".muertos")
                    .transition().duration(600)
                    .attr("d", line.y(d => yLogRight(d.fallecidos))(datosPais));

            break;

            case 6: 
             d3.select("#grafico"+containerNumber)
                    .selectAll(".delayed").transition().duration(600)
                    .attr("transform", "translate(0,0)")
                ;
            break;

            case 7: 
            var retraso = d3.select("#grafico"+containerNumber).select(".delayed").attr("data-retraso");
                d3.select("#grafico"+containerNumber)
                    .selectAll(".delayed").transition().duration(600)
                    .attr("transform", "translate(" + (entra?retraso:0) + ",0)")
                ;
            break;



        }

      
  
	}else{
        switch (step) {
            case 0: // inicia el traslado de la curva de casos con el retraso
                var retraso = d3.select("#grafico"+containerNumber).select(".delayed").attr("data-retraso");
                d3.select("#grafico"+containerNumber)
                    .selectAll(".delayed").transition().duration(600)
                    .attr("transform", "translate(" + (entra?retraso:0) + ",0)");
            break;

        }
        

            /// aca maneja los otros scrollys
    }
          

}


function ajustaMesesEjeX(g) {
        var diasUltimoMes = d3.timeDay.count(d3.timeMonth.floor(x.domain()[1]),x.domain()[1]);
        var diasPrimerMes = Math.abs(d3.timeDay.count(d3.timeMonth.ceil(x.domain()[0]),x.domain()[0]));
		  // ESTO PONE LOS NOMBRES DE LOS MESES EN MEDIO DE CADA MES
           g.selectAll(".tick:not(:last-of-type):not(:last-of-type) text") // para todos los meses menos el ultimo
                .attr("dx", x(d3.timeDay.offset(x.domain()[0], 15 ))) // mueve el equivalente a 15 dias
                .attr("dy", "0.3em") ;

          if(diasPrimerMes>8){
            g.selectAll(".tick:first-of-type text") // el ultimo si no esta completo lo centra en los dias que haya
                .clone(true)
                .text(d3.timeFormat("%B")(d3.timeMonth.floor(x.domain()[0])))
                .attr("dx",  x(d3.timeDay.offset(x.domain()[0], diasPrimerMes/2))*-1)
                .attr("dy", "0.3em") ;
            }

  
            if(diasUltimoMes<8){
                g.selectAll(".tick:last-of-type text").remove()
            }else{
            g.selectAll(".tick:last-of-type text") // el ultimo si no esta completo lo centra en los dias que haya
                .text(d3.timeFormat("%b")(d3.timeMonth.floor(x.domain()[1])))
                .attr("dx",  x(d3.timeDay.offset(x.domain()[0], diasUltimoMes/2 )))
                .attr("dy", "0.3em") ;
            }

            g.selectAll(".tick line") // las lineas que separan los meses, mas altas
                .attr("y2", "1.4em") ;
			}


});

</script>



<div class="note info"><p>El retraso entre el número de fallecimientos y el número de casos confirmados se debe principalmente al curso natural de la enfermedad (aunque otras causas como retrasos en la carga de datos también pueden tener efecto).</p>
<p>Mientras más se tarde en testear a las personas con síntomas, y mientras más se tarde en conocer el resultado de ese test, menor será el retraso entre la curva de casos y la de fallecimientos. Las dos curvas estarán más “cerca”.</p>
<p>La curva del número de fallecimientos es un indicador más confiable que la del número de casos confirmados, porque no depende de decisiones como la definición de caso sospechoso y el número de testeos que se están realizando. Sin embargo, tiene sus propias limitaciones y la principal es que es un indicador que llega con más retraso que el de casos confirmados.</p>
</div>
    </div>
                      <div class="compartir">Compartir:
                        <a  href="https://www.facebook.com/sharer/sharer.php?u=https://decodificar.org/covid/numero_de_fallecimientos/&quote=¿Qué nos dice el número de fallecimientos?" target="_blank" title="Share on Facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURI(https://decodificar.org/covid/numero_de_fallecimientos/) + '&quote=' + encodeURI(¿Qué nos dice el número de fallecimientos?); return false;"><i class="fab fa-facebook" aria-hidden="true"></i></a>
                        <a href="https://twitter.com/intent/tweet?text=¿Qué nos dice el número de fallecimientos?%20&url=https://decodificar.org/covid/numero_de_fallecimientos/" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURI(¿Qué nos dice el número de fallecimientos?) + '&url='+ encodeURI(https://decodificar.org/covid/numero_de_fallecimientos/) ; return false;"><i class="fab fa-twitter" aria-hidden="true"></i></a>
                        <a href="https://api.whatsapp.com/send?text=¿Qué nos dice el número de fallecimientos? https://decodificar.org/covid/numero_de_fallecimientos/" target="_blank" ><i class="fab fa-whatsapp" aria-hidden="true"></i></a>

                      </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/covid/muertes_por_pais/" rel="prev" title="¿En qué países murieron más personas por COVID-19?">
      <i class="fa fa-chevron-left"></i> ¿En qué países murieron más personas por COVID-19?
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



        </div>
        

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        <!-- <div class="firma"> -->

<!-- <a href="/">
  Inicio</a> 
  &mdash;
  <a href="/about/">
    Acerca del proyecto</a>
</div> -->

<div class="firma">
  <img src="/images/logo_small.png"> 
  Un proyecto de la <a href="https://www.fundacionbyb.org/" target="_blank">Fundación Bunge y Born</a>, en alianza con  <a href="http://expedicionciencia.org.ar/" target="_blank">Expedición Ciencia</a>
</div>

<div class="redes">
<a href="https://www.facebook.com/fundacionbungeyborn/" target="_blank"><i class="fab fa-facebook-square"></i></a>
<a href="https://www.instagram.com/fundacionbungeyborn/" target="_blank"><i class="fab fa-instagram-square"></i></a>
<a href="https://www.linkedin.com/company/fundacion-bunge-y-born/" target="_blank"><i class="fab fa-linkedin"></i></a>
</div>


<div class="reporte">
<a href="/about/#Contacto">
  Recibí novedades</a>
</div>


<div class="copyright">
  <span itemprop="copyrightYear">&copy; 2020</span>
  <span class="author" itemprop="copyrightHolder">Fundación Bunge y Born</span>
 / <a href="https://www.fundacionbyb.org/politica-de-privacidad" target="_blank">Política de privacidad</a>
</div>

<div class="powered-by">
Creado con <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a>
&amp; <a href="https://theme-next.js.org/mist/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>


  















  

  

</body>
</html>
